
#!/bin/bash

echo
echo -e "\x1B[1;33m

============ ENUMERAÃ‡AO DE DNS =============

By Igor Capistrano\x1B[0m"
echo
echo

echo  
echo -e  "
=============================================================================================================

"


echo "DNS Servers para $1:"
servers=$(whois $1 | grep "nserver" | cut -d " " -f6)
echo "$servers"

echo
echo -e  "
============================================================================================================= 

"


for dns in $servers
do
	echo "############ TESTANDO $dns #############"
	teste=$(host -ls $1 $dns | grep "REFUSED" | cut -d "(" -f2 | cut -d ")" -f1)
	if [ "$teste" == "REFUSED" ];
	then
		echo "Tempo expirado ou transferencia nao permitida"
	else
		host -ls $1 $dns
	fi
done

